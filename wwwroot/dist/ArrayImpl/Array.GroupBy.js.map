{"version":3,"sources":["ArrayImpl/Array.GroupBy.ts"],"names":[],"mappings":"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","file":"Array.GroupBy.js","sourcesContent":["\r\n// Groups the elements of a sequence according to a specified key selector function.\r\nArray.prototype.groupBy = function() {\r\n\r\n\t/* Assign parameters */\r\n\tvar keySelector = arguments.length > 0 ? arguments[0] : x => x;\r\n\tvar comparer = {\r\n\t\tequals: (x, y) => x == y\r\n\t};\r\n\tvar elementSelector = x => x;\r\n\tvar resultSelector = (key, collection) => {\r\n\t\tcollection.key = key;\r\n\t\treturn collection;\r\n\t} \r\n\r\n\tif (arguments.length === 2) {\r\n\t\tif (typeof(arguments[1]) === \"object\") {\r\n\t\t\tcomparer = arguments[1];\r\n\t\t} else {\r\n\t\t\telementSelector = arguments[1];\r\n\t\t}\r\n\t}\r\n\r\n\tif (arguments.length === 3) {\r\n\t\telementSelector = arguments[1];\r\n\r\n\t\tif (typeof (arguments[2]) === \"object\") {\r\n\t\t\tcomparer = arguments[2];\r\n\t\t} else {\r\n\t\t\tresultSelector = arguments[2];\r\n\t\t}\r\n\t}\r\n\r\n\tif (arguments.length === 4) {\r\n\t\telementSelector = arguments[1];\r\n\t\tresultSelector = arguments[2];\r\n\t\tcomparer = arguments[3];\r\n\t}\r\n\r\n\t/* Perform grouping */\r\n\tvar groups = [];\r\n\r\n\tvar getKeyPosition = (key) => {\r\n\t\tfor (var i = 0; i < groups.length; i++) {\r\n\t\t\tif (comparer.equals(groups[i].key, key)) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tfor (var i = 0; i < this.length; i++) {\r\n\t\tvar key = keySelector(this[i]);\r\n\t\tvar element = elementSelector(this[i]);\r\n\t\tvar index = getKeyPosition(key);\r\n\t\t\r\n\t\tif (index >= 0) {\r\n\t\t\tgroups[index].push(element);\r\n\t\t} else {\r\n\t\t\tvar group = [];\r\n\t\t\t(<any>group).key = key;\r\n\t\t\t(<any>group).push(element);\r\n\r\n\t\t\tgroups.push(group);\r\n\t\t}\r\n\t}\r\n\r\n\t/* Project results */\r\n\tvar projectedResults = [];\r\n\tfor (var i = 0; i < groups.length; i++) {\r\n\t\tprojectedResults.push(resultSelector(groups[i].key,  groups[i]));\r\n\t}\r\n\r\n\treturn projectedResults;\r\n}\r\n"]}